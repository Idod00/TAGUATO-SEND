# ============================================
# TAGUATO-SEND - Environment Configuration
# ============================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env

# --- Server ---
SERVER_URL=http://localhost:8080
GATEWAY_PORT=80

# --- Admin User (used on first DB init only) ---
ADMIN_USERNAME=admin
ADMIN_PASSWORD=CHANGE_ME_USE_STRONG_PASSWORD_FOR_ADMIN

# --- Authentication ---
# Generate a secure key: openssl rand -hex 32
AUTHENTICATION_API_KEY=CHANGE_ME_GENERATE_A_SECURE_KEY
AUTHENTICATION_EXPOSE_IN_FETCH_INSTANCES=true

# --- Database (PostgreSQL) ---
POSTGRES_USER=taguato
POSTGRES_PASSWORD=CHANGE_ME_USE_STRONG_PASSWORD
POSTGRES_DB=evolution
# POSTGRES_PORT=5432  # Uncomment to expose PostgreSQL externally (debug only)
DATABASE_ENABLED=true
DATABASE_PROVIDER=postgresql
DATABASE_CONNECTION_URI=postgresql://taguato:CHANGE_ME_USE_STRONG_PASSWORD@taguato-postgres:5432/evolution?schema=public
DATABASE_CONNECTION_CLIENT_NAME=taguato_send

# --- Cache (Redis) ---
# REDIS_PORT=6379  # Uncomment to expose Redis externally (debug only)
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
CACHE_REDIS_ENABLED=true
CACHE_REDIS_URI=redis://:CHANGE_ME_REDIS_PASSWORD@taguato-redis:6379/0
CACHE_REDIS_PREFIX_KEY=taguato
CACHE_REDIS_SAVE_INSTANCES=false
CACHE_LOCAL_ENABLED=false

# --- WhatsApp Baileys ---
CONFIG_SESSION_PHONE_CLIENT=TAGUATO-SEND
CONFIG_SESSION_PHONE_NAME=Chrome

# --- Backups ---
# Auto-backup interval in seconds (default: 86400 = 24 hours)
BACKUP_INTERVAL=86400

# --- Logging ---
LOG_LEVEL=WARN
LOG_COLOR=true

# --- CORS ---
# CORS_ORIGIN is used by Evolution API internally. Keep as * so the gateway can proxy freely.
CORS_ORIGIN=*
# GATEWAY_CORS_ORIGIN controls the Access-Control-Allow-Origin header sent to browsers.
# If unset, no CORS headers are sent (browsers block cross-origin by default = secure).
# Set to your production domain for panel/frontend access.
# Example: GATEWAY_CORS_ORIGIN=https://yourdomain.com
# GATEWAY_CORS_ORIGIN=https://yourdomain.com

# --- Webhook Global (optional) ---
# WEBHOOK_GLOBAL_URL=https://your-server.com/webhook
# WEBHOOK_GLOBAL_ENABLED=false
# WEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS=false

# --- Password Recovery (SMTP) ---
# Configure SMTP to enable email-based password recovery.
# If SMTP is not configured, recovery falls back to WhatsApp (if phone_number is set).
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@yourdomain.com
# SMTP_SECURE=tls  # Options: tls (default), ssl, none

# --- Password Recovery (WhatsApp fallback) ---
# Name of the admin's WhatsApp instance used to send recovery codes via WhatsApp.
# Only used when the user has no email but has a phone_number.
# RECOVERY_ADMIN_INSTANCE=admin-instance

# --- External Alerting ---
# Webhook URL for service-down/recovery notifications (Slack, Discord, Teams, or generic).
# If not set, no external alerts are sent.
# ALERT_WEBHOOK_URL=https://hooks.slack.com/services/xxx/yyy/zzz
# Cooldown between repeated alerts for the same event (default: 300 seconds)
# ALERT_COOLDOWN_SECONDS=300
